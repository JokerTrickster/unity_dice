---
name: main-page-screen
description: Unity 주사위 게임의 메인 대시보드 화면으로 프로필, 피로도, 매칭, 설정 기능 제공
status: backlog
created: 2025-09-01T04:49:09Z
---

# PRD: main-page-screen

## Executive Summary

Unity 주사위 게임의 핵심 허브인 메인 페이지 화면을 구현합니다. 사용자가 게임에 로그인한 후 가장 먼저 보는 화면으로, 프로필 관리, 피로도 시스템, 매칭 시스템, 그리고 각종 설정 기능을 통합적으로 제공하는 대시보드 역할을 수행합니다.

## Problem Statement

### 문제점
현재 로그인 시스템은 완료되었으나, 사용자가 로그인 후 게임의 핵심 기능들에 접근할 수 있는 통합된 메인 화면이 부재합니다. 사용자는 프로필 확인, 게임 매칭, 설정 변경 등의 주요 기능들을 원활하게 사용할 수 있는 직관적인 인터페이스가 필요합니다.

### 해결 필요성
- 게임의 핵심 기능들에 대한 통합된 접근점 제공
- 피로도 시스템을 통한 게임 플레이 관리
- 실시간 매칭 시스템을 통한 멀티플레이어 경험
- 사용자 설정 및 프로필 관리의 편의성 향상

## User Stories

### 주요 사용자 페르소나
**게임 플레이어**: Unity 주사위 게임을 즐기는 모바일 게임 사용자

### 상세 사용자 스토리

#### 프로필 관리
- **As a** 게임 플레이어, **I want to** 내 프로필 정보를 확인하고 변경할 수 있도록, **So that** 게임 내에서 나만의 개성을 표현할 수 있다.
- **As a** 게임 플레이어, **I want to** 획득한 프로필 중에서 선택할 수 있도록, **So that** 게임 성취에 따른 보상을 활용할 수 있다.

**Acceptance Criteria:**
- 현재 설정된 프로필과 닉네임이 화면에 표시됨
- 프로필 클릭 시 획득한 프로필 목록이 표시됨
- 미획득 프로필은 잠금 상태로 표시됨
- 프로필 변경 시 즉시 반영됨

#### 피로도 시스템
- **As a** 게임 플레이어, **I want to** 현재 피로도 상태를 확인할 수 있도록, **So that** 게임 플레이 가능 여부를 파악할 수 있다.
- **As a** 게임 플레이어, **I want to** 피로도를 구매할 수 있도록, **So that** 더 많은 게임을 즐길 수 있다.

**Acceptance Criteria:**
- 피로도는 "현재 보유량 / 최대 보유량" 형태로 표시됨
- 피로도 부족 시 게임 플레이 제한됨
- 플러스 버튼을 통한 피로도 구매 기능 제공
- 게임 내 재화로 피로도 구매 가능

#### 매칭 시스템
- **As a** 게임 플레이어, **I want to** 랜덤 매칭을 통해 다른 플레이어와 게임할 수 있도록, **So that** 다양한 상대와 경쟁할 수 있다.
- **As a** 게임 플레이어, **I want to** 친구들과 함께 게임할 수 있도록, **So that** 지인들과 즐거운 시간을 보낼 수 있다.

**Acceptance Criteria:**
- 2~4명 인원수 선택 가능
- 랜덤 매칭 기능 제공
- 방 생성 시 4자리 숫자 코드 자동 생성
- 방 참여하기를 통한 코드 입력 기능
- 매칭 중 취소 기능 제공
- 웹소켓을 통한 실시간 매칭 처리

#### 설정 관리
- **As a** 게임 플레이어, **I want to** 게임 설정을 조정할 수 있도록, **So that** 개인 취향에 맞는 게임 환경을 구성할 수 있다.

**Acceptance Criteria:**
- 배경 음악 on/off 설정
- 효과음 on/off 설정
- 로그아웃 기능
- 약관 보기 기능
- 우편함 접근 기능

## Requirements

### Functional Requirements

#### FR-001: 프로필 시스템
- 현재 프로필과 닉네임 표시
- 프로필 선택 UI (획득/미획득 구분)
- 프로필 변경 기능
- 성취 기반 프로필 잠금/해제 시스템

#### FR-002: 피로도 시스템
- 현재/최대 피로도 표시
- 피로도 부족 시 게임 플레이 제한
- 게임 내 재화를 통한 피로도 구매
- 피로도 구매 UI 및 확인 다이얼로그

#### FR-003: 매칭 시스템
- 인원수 선택 UI (2~4명)
- 랜덤 매칭 기능
- 방 생성 및 4자리 코드 생성
- 방 참여하기 (코드 입력)
- 매칭 진행 상태 표시
- 매칭 취소 기능
- 웹소켓 통신 연동

#### FR-004: 설정 시스템
- 오디오 설정 (배경음악, 효과음)
- 로그아웃 기능
- 약관 보기
- 우편함 접근

#### FR-005: 우편함 시스템
- 친구 메시지 수신
- 공지사항 확인
- 피로도 선물 수신
- 읽음/안읽음 상태 관리

### Non-Functional Requirements

#### NFR-001: 성능 요구사항
- 메인 화면 로딩 시간: 3초 이내
- 매칭 요청 응답시간: 2초 이내
- 프로필 변경 반영시간: 1초 이내
- 메모리 사용량: 추가 30MB 이하

#### NFR-002: 사용성 요구사항
- 직관적인 UI 레이아웃
- 터치 친화적 버튼 크기 (최소 44pt)
- 색상 대비비 4.5:1 이상 (접근성)
- 한국어 로컬라이제이션

#### NFR-003: 신뢰성 요구사항
- 웹소켓 연결 실패 시 재연결 시도
- 네트워크 오류 시 사용자 친화적 메시지 표시
- 매칭 중 앱 종료 시 복구 기능

#### NFR-004: 보안 요구사항
- 방 코드 중복 방지
- 매칭 데이터 암호화 전송
- 피로도 구매 검증 시스템

## Success Criteria

### 주요 지표 (KPIs)
- **사용자 참여도**: 일일 활성 사용자의 90% 이상이 매칭 시스템 사용
- **매칭 성공률**: 매칭 요청의 95% 이상 성공적 완료
- **피로도 구매율**: 전체 사용자의 30% 이상이 피로도 구매 경험
- **화면 로딩 성능**: 평균 로딩 시간 3초 이내 달성
- **사용자 만족도**: 앱스토어 평점 4.0 이상 유지

### 측정 가능한 결과
- 메인 화면 체류 시간 증가 (목표: 평균 30초 이상)
- 매칭 취소율 감소 (목표: 10% 이하)
- 설정 변경 빈도 (목표: 사용자당 월 2회 이상)
- 우편함 확인률 (목표: 90% 이상)

## Constraints & Assumptions

### 기술적 제약사항
- Unity 2022.3 LTS 기반 개발
- Android API 21 이상 지원
- 기존 Google Play Games Services 인증 시스템 활용
- 웹소켓 서버 인프라 기 구축된 상태

### 리소스 제약사항
- 개발 기간: 6주 (240시간)
- 개발팀: 1명 (Unity 개발자)
- 서버 개발: 별도 팀에서 병렬 진행

### 가정사항
- 웹소켓 서버 API 스펙은 개발 초기에 확정
- 프로필 이미지는 기본 제공 세트 사용
- 게임 내 재화 시스템 기 구현된 상태
- 성취 시스템 데이터는 서버에서 관리

## Out of Scope

다음 기능들은 현재 버전에서 제외되며, 향후 버전에서 고려됩니다:

- **친구 시스템**: 친구 추가, 친구 목록, 친구 초대 기능
- **채팅 시스템**: 매칭 중이나 게임 중 채팅 기능
- **리더보드**: 순위표 및 경쟁 시스템
- **소셜 공유**: SNS 공유 기능
- **푸시 알림**: 매칭 완료, 피로도 회복 알림
- **실시간 음성 채팅**: 게임 중 음성 커뮤니케이션
- **프로필 커스터마이징**: 사용자 정의 아바타나 프로필 이미지 업로드

## Dependencies

### 외부 종속성
- **웹소켓 서버**: 매칭 시스템을 위한 실시간 통신 서버
  - 담당팀: 백엔드팀
  - 예상 완료: 개발 시작 2주 후
- **게임 내 재화 API**: 피로도 구매를 위한 결제 시스템
  - 담당팀: 백엔드팀
  - 상태: 기 구축됨
- **성취 시스템 API**: 프로필 잠금/해제를 위한 성취 데이터
  - 담당팀: 백엔드팀
  - 상태: 기 구축됨

### 내부 종속성
- **Google Play Games Services**: 기존 인증 시스템 연동
  - 상태: Epic #1에서 완료됨
- **NetworkManager**: HTTP 통신 및 웹소켓 연결 관리
  - 상태: 기본 구조 완료, 웹소켓 지원 추가 필요
- **UserDataManager**: 사용자 정보 및 설정 관리
  - 상태: 기본 구조 완료됨

### 기술 스택
- **UI Framework**: Unity UGUI
- **네트워킹**: Unity Networking, WebSocket-sharp
- **상태 관리**: Custom State Machine
- **데이터 저장**: PlayerPrefs, JSON 직렬화
- **설정 관리**: ScriptableObject 기반 구성 시스템

## Technical Architecture

### 컴포넌트 구조
```
MainPageScreen/
├── UI/
│   ├── ProfileSection/
│   │   ├── ProfileDisplay.cs
│   │   └── ProfileSelector.cs
│   ├── EnergySection/
│   │   ├── EnergyDisplay.cs
│   │   └── EnergyPurchase.cs
│   ├── MatchingSection/
│   │   ├── MatchingUI.cs
│   │   ├── RoomCreation.cs
│   │   └── RoomJoin.cs
│   └── SettingsSection/
│       ├── AudioSettings.cs
│       ├── SettingsMenu.cs
│       └── MailboxAccess.cs
├── Managers/
│   ├── MainPageManager.cs
│   ├── MatchingManager.cs
│   ├── EnergyManager.cs
│   └── MailboxManager.cs
├── Network/
│   ├── WebSocketClient.cs
│   └── MatchingProtocol.cs
└── Data/
    ├── MainPageData.cs
    └── ConfigManager.cs
```

### 서버 통신 구조
```
Client ←→ WebSocket Server
├── 매칭 요청/응답
├── 방 생성/참여
├── 매칭 상태 업데이트
└── 매칭 취소

Client ←→ HTTP API Server
├── 프로필 데이터 조회/업데이트
├── 피로도 구매 처리
├── 우편함 데이터 조회
└── 설정 데이터 동기화
```

## Implementation Plan

### Phase 1: 기본 UI 구조 (주 1-2)
- 메인 페이지 레이아웃 구성
- 프로필 섹션 구현
- 피로도 표시 시스템 구현
- 기본 설정 UI 구현

### Phase 2: 매칭 시스템 (주 3-4)
- 웹소켓 클라이언트 구현
- 랜덤 매칭 기능 구현
- 방 생성/참여 시스템 구현
- 매칭 상태 UI 구현

### Phase 3: 고급 기능 (주 5-6)
- 피로도 구매 시스템 연동
- 우편함 시스템 구현
- 프로필 선택 시스템 완성
- 통합 테스트 및 최적화

## Risk Assessment

### 높은 위험도
- **웹소켓 서버 지연**: 백엔드팀의 서버 개발 지연으로 매칭 시스템 테스트 불가
  - 완화책: Mock 서버 구현으로 클라이언트 개발 진행
- **매칭 성능 문제**: 동시 접속자 증가 시 매칭 지연 발생
  - 완화책: 로드 테스트 및 성능 모니터링 시스템 구축

### 중간 위험도
- **UI/UX 복잡성**: 많은 기능이 하나 화면에 집중되어 사용성 저하 가능
  - 완화책: 사용자 테스트를 통한 UI 개선 반복
- **네트워크 불안정성**: 모바일 환경에서 연결 끊김 처리
  - 완화책: 자동 재연결 및 오프라인 모드 지원

### 낮은 위험도
- **프로필 시스템 확장**: 향후 더 많은 프로필 옵션 추가 시 구조 변경 필요
  - 완화책: 확장 가능한 데이터 구조 설계

## Configuration Management

### 서버 URL 관리
```json
{
  "serverConfig": {
    "websocketUrl": "wss://game-api.unitydice.com/ws",
    "httpApiUrl": "https://game-api.unitydice.com/v1",
    "timeout": 30000,
    "retryAttempts": 3
  },
  "gameConfig": {
    "maxEnergyCapacity": 100,
    "energyRecoveryRate": 1,
    "maxPlayers": 4,
    "minPlayers": 2
  }
}
```

이 구성은 StreamingAssets 또는 Resources 폴더에 저장되어 빌드 후에도 수정 가능하도록 관리됩니다.